
<!doctype html>
<html>
<head>
    <title>Sprouts Loyalty Dashboard</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Sprouts Loyalty Dashboard</h1>
    <div class="button-group">
        <button onclick="setRange('Daily')" id="btn-daily">Daily</button>
        <button onclick="setRange('Weekly')" id="btn-weekly">Weekly</button>
        <button onclick="setRange('Monthly')" id="btn-monthly">Monthly</button>
    </div>

    <div class="grid-container">
        <div class="card"><h2>Total Registered Users</h2><p class="narrative">How many customers joined.</p><div id="chart-users"></div></div>
        <div class="card"><h2>New vs Repeat Users</h2><p class="narrative">Compare new and loyal customers.</p><div id="chart-repeat"></div></div>
        <div class="card"><h2>Revenue</h2><p class="narrative">Total earnings from loyalty users.</p><div id="chart-revenue"></div></div>
        <div class="card"><h2>Basket Size</h2><p class="narrative">Average spend per customer.</p><div id="chart-basket"></div></div>
    </div>

    <script>
        let currentRange = 'Weekly';

        const data = {
            Daily: { users: 100, repeat: [40, 60], revenue: 2000, basket: 20 },
            Weekly: { users: 700, repeat: [300, 400], revenue: 14000, basket: 28 },
            Monthly: { users: 3000, repeat: [1200, 1800], revenue: 60000, basket: 32 }
        };

        function setRange(range) {
            currentRange = range;
            document.querySelectorAll('.button-group button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${range.toLowerCase()}`).classList.add('active');
            drawCharts();
        }

        function drawCharts() {
            const d = data[currentRange];
            Plotly.newPlot('chart-users', [{ x: ['Users'], y: [d.users], type: 'bar' }]);
            Plotly.newPlot('chart-repeat', [{ x: ['New', 'Repeat'], y: d.repeat, type: 'bar' }]);
            Plotly.newPlot('chart-revenue', [{ x: ['Revenue'], y: [d.revenue], type: 'bar' }]);
            Plotly.newPlot('chart-basket', [{ x: ['Basket Size'], y: [d.basket], type: 'bar' }]);
        }

        drawCharts();
    </script>
</body>
</html>
